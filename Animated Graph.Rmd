---
title: "Animated Graph"
author: "Carlos Peque√±o (aka Pareto Deficient)"
output: html_document
---

```{julia, results='hide'}
using Random
using Plots
using Statistics
using Base.Threads
using Distributions
```

```{julia}
# Define the number of simulations (this would be the final number of samples you want to plot)
S = Int(N)  # Instead of animating, we use the full set of simulations

sampled_random_walks = random_walks[1:S]
sampled_ar1_processes = ar1_processes[1:S]

# Parallelized mean calculation
random_walk_averages = Vector{Float64}(undef, S)
ar1_averages = Vector{Float64}(undef, S)

Threads.@threads for j in 1:S
    random_walk_averages[j] = mean(sampled_random_walks[j])
    ar1_averages[j] = mean(sampled_ar1_processes[j])
end

# Create the first plot for random walks
p1 = plot(title="Random Walks", legend=false)
for rw in sampled_random_walks
    plot!(p1, rw, lw=0.5, alpha=0.3, color=RGB(rand(), rand(), rand()))
end

# Create the second plot for AR(1) processes
p2 = plot(title="AR(1) Processes", legend=false)
for ar in sampled_ar1_processes
    plot!(p2, ar, lw=0.5, alpha=0.3, color=RGB(rand(), rand(), rand()))
end

# Create the histogram for random walk means
p3 = histogram(random_walk_averages, bins=30, normalize=true, alpha=0.5,
               label="Random Walk Means", color=:blue, title="Random Walk Means Density")

# Create the histogram for AR(1) means
p4 = histogram(ar1_averages, bins=30, normalize=true, alpha=0.5,
               label="AR(1) Means", color=:red, title="AR(1) Means Density")

# Display all plots in a 2x2 layout
plot(p1, p2, p3, p4, layout=(2, 2), size=(900, 600))

```
